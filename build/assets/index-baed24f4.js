import{j as _}from"./@restart-703e8f0f.js";import{r as i}from"./react-e09a1a9a.js";import{_ as P,a as x,b as k,c as v,d as f,e as y,f as C,g as T,h,i as S}from"./webgi-8cc70655.js";import{g as p,S as R}from"./gsap-010257a6.js";import{u as E}from"./useReponsive-a761b1ba.js";import"./dom-helpers-4ed993c7.js";import"./react-dom-506482cc.js";import"./scheduler-04ce0582.js";import"./@chevrotain-7e5ab5c8.js";import"./lodash-4ed993c7.js";const A=(a,r,s,g)=>{p.timeline().to(a,{x:-6.73,y:8.25,z:-4.78,scrollTrigger:{trigger:".triger",start:"top bottom",end:"top top",scrub:2,immediateRender:!1},force3D:!0,onUpdate:s}).to(r,{x:-1.59,y:.35,z:1.16,scrollTrigger:{trigger:".triger",start:"top bottom",end:"top top",scrub:2,immediateRender:!1},force3D:!0}).to(".home",{opacity:0,scrollTrigger:{trigger:".triger",start:"top bottom",end:"top top",scrub:2,immediateRender:!1}}).to(".models",{opacity:0,scrollTrigger:{trigger:".end-scroll",start:"top bottom",end:"top top",scrub:2,immediateRender:!1},force3D:!0}).to(".triger",{opacity:0,scrollTrigger:{trigger:".end-scroll",start:"top bottom",end:"top top",scrub:2,immediateRender:!1}})};p.registerPlugin(R);const V=()=>{const a=i.useRef(null),{matches:r}=E("(max-width: 500px)"),s=i.useCallback((e,o,t,n)=>{e&&o&&t&&A(e,o,t)},[]),g=i.useCallback(async()=>{const e=new P({canvas:a.current}),o=await e.addPlugin(x),t=e.scene.activeCamera,n=t.position,d=t.target;await e.addPlugin(k),await e.addPlugin(new v(32)),await e.addPlugin(new f(!0)),await e.addPlugin(y),await e.addPlugin(C),await e.addPlugin(T),await e.addPlugin(h);const m=o.importer;m.addEventListener("onProgress",c=>{var u;const w=c.loaded/c.total;(u=document.querySelector(".progress"))==null||u.setAttribute("style",`transform: scaleX(${w})`)}),m.addEventListener("onLoad",c=>{p.to(".loader",{x:"100%",duration:.8,ease:"power4.inOut",delay:1,onComplete:()=>{document.body.style.overflowY="auto"}})}),e.renderer.refreshPipeline(),await o.addFromPath("/doll.glb"),e.getPlugin(f).config.clipBackground=!0,e.scene.activeCamera.setCameraOptions({controlsEnabled:!1}),S(),r&&(n.set(2.06,2.04,11.02),d.set(-.08,.75,.01),t.setCameraOptions({fov:30})),window.scrollTo(0,0);let l=!0;const b=()=>{l=!0,e.setDirty()};e.addEventListener("preFrame",()=>{l&&(t.positionTargetUpdated(!0),l=!1)}),s(n,d,b)},[r]);return i.useEffect(()=>{g()},[r]),_("div",{id:"webgi-canvas-container",className:"models",children:_("canvas",{id:"webgi-canvas",ref:a})})};export{V as default};
